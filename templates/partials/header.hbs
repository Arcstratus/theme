<header class="fixed top-0 left-0 right-0 z-50 bg-bg-primary/90 backdrop-blur-md border-b border-border-primary/50 transition-all duration-300 shadow-sm" id="animated-header">
  <div class="container mx-auto px-4">
    <nav class="flex items-center justify-between h-16">
      <!-- Logo/Site Title -->
      <div class="flex items-center space-x-3">
        <div class="w-8 h-8 bg-gradient-to-br from-arcstratus-blue to-arcstratus-indigo rounded-lg flex items-center justify-center">
          <svg class="w-4 h-4 text-text-inverse" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" />
          </svg>
        </div>
        <a href="{{@site.url}}" class="text-2xl font-bold text-text-primary hover:text-interactive-primary transition-colors duration-200" id="site-logo">
          {{@site.title}}
        </a>
      </div>
      
      <!-- Navigation Menu -->
      <div class="hidden md:flex items-center space-x-8" id="nav-menu">
        <a href="{{@site.url}}" class="text-text-secondary hover:text-interactive-primary font-medium transition-colors duration-200 relative nav-link py-2">
          Home
          <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-interactive-primary transition-all duration-300 nav-underline"></span>
        </a>
        <a href="{{@site.url}}/about" class="text-text-secondary hover:text-interactive-primary font-medium transition-colors duration-200 relative nav-link py-2">
          About
          <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-interactive-primary transition-all duration-300 nav-underline"></span>
        </a>
        <a href="{{@site.url}}/archive" class="text-text-secondary hover:text-interactive-primary font-medium transition-colors duration-200 relative nav-link py-2">
          Archive
          <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-interactive-primary transition-all duration-300 nav-underline"></span>
        </a>
        <a href="{{@site.url}}/featured" class="text-text-secondary hover:text-interactive-primary font-medium transition-colors duration-200 relative nav-link py-2 flex items-center space-x-1">
          <svg class="w-4 h-4 text-warning-500" fill="currentColor" viewBox="0 0 24 24">
            <path d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path>
          </svg>
          <span>Featured</span>
          <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-interactive-primary transition-all duration-300 nav-underline"></span>
        </a>
        <!-- Search Button -->
        <button class="flex items-center justify-center w-10 h-10 text-text-secondary hover:text-interactive-primary hover:bg-bg-secondary rounded-lg transition-all duration-200" data-ghost-search id="header-search-btn">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
        </button>
      </div>
      
      <!-- Mobile Menu Button -->
      <button class="md:hidden flex items-center justify-center w-10 h-10 text-text-secondary hover:text-interactive-primary hover:bg-bg-secondary rounded-lg transition-all duration-200" id="mobile-menu-btn">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </nav>
    
    <!-- Mobile Menu -->
    <div class="md:hidden overflow-hidden transition-all duration-300 ease-in-out max-h-0 border-t border-border-primary/30" id="mobile-menu">
      <div class="py-4 space-y-2 bg-bg-primary/95 backdrop-blur-sm">
        <a href="{{@site.url}}" class="block px-4 py-3 text-text-secondary hover:text-interactive-primary hover:bg-bg-secondary rounded-lg transition-all duration-200 mx-2">
          <div class="flex items-center space-x-3">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
            </svg>
            <span>Home</span>
          </div>
        </a>
        <a href="{{@site.url}}/about" class="block px-4 py-3 text-text-secondary hover:text-interactive-primary hover:bg-bg-secondary rounded-lg transition-all duration-200 mx-2">
          <div class="flex items-center space-x-3">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <span>About</span>
          </div>
        </a>
        <a href="{{@site.url}}/archive" class="block px-4 py-3 text-text-secondary hover:text-interactive-primary hover:bg-bg-secondary rounded-lg transition-all duration-200 mx-2">
          <div class="flex items-center space-x-3">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
            </svg>
            <span>Archive</span>
          </div>
        </a>
        <a href="{{@site.url}}/featured" class="block px-4 py-3 text-text-secondary hover:text-interactive-primary hover:bg-bg-secondary rounded-lg transition-all duration-200 mx-2">
          <div class="flex items-center space-x-3">
            <svg class="w-5 h-5 text-warning-500" fill="currentColor" viewBox="0 0 24 24">
              <path d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path>
            </svg>
            <span>Featured</span>
          </div>
        </a>
        <button class="w-full px-4 py-3 text-text-secondary hover:text-interactive-primary hover:bg-bg-secondary rounded-lg transition-all duration-200 mx-2" data-ghost-search>
          <div class="flex items-center space-x-3">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
            <span>Search</span>
          </div>
        </button>
      </div>
    </div>
  </div>
</header>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Animate header elements on load
  const { animate, stagger } = Motion;
  
  // Animate logo
  animate('#site-logo', 
    { opacity: [0, 1], y: [-20, 0] }, 
    { duration: 0.6, easing: 'ease-out' }
  );
  
  // Animate navigation links with stagger
  animate('.nav-link', 
    { opacity: [0, 1], y: [-10, 0] }, 
    { duration: 0.4, delay: stagger(0.1), easing: 'ease-out' }
  );
  
  // Header scroll effect
  let lastScrollY = window.scrollY;
  
  window.addEventListener('scroll', () => {
    const header = document.getElementById('animated-header');
    const currentScrollY = window.scrollY;
    
    if (currentScrollY > 100) {
      header.classList.add('shadow-lg');
      header.classList.remove('bg-white/90');
      header.classList.add('bg-white/95');
    } else {
      header.classList.remove('shadow-lg');
      header.classList.remove('bg-white/95');
      header.classList.add('bg-white/90');
    }
    
    // Hide/show header on scroll
    if (Math.abs(currentScrollY - lastScrollY) > 10) {
      if (currentScrollY > lastScrollY && currentScrollY > 200) {
        animate(header, { y: '-100%' }, { duration: 0.3 });
      } else {
        animate(header, { y: '0%' }, { duration: 0.3 });
      }
      lastScrollY = currentScrollY;
    }
  });
  
  // Mobile menu toggle
  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  let mobileMenuOpen = false;
  
  mobileMenuBtn.addEventListener('click', () => {
    mobileMenuOpen = !mobileMenuOpen;
    
    if (mobileMenuOpen) {
      mobileMenu.style.maxHeight = mobileMenu.scrollHeight + 'px';
      animate(mobileMenu.children[0].children, 
        { opacity: [0, 1], x: [-20, 0] }, 
        { duration: 0.3, delay: stagger(0.05) }
      );
    } else {
      mobileMenu.style.maxHeight = '0px';
    }
  });
  
  // Nav link hover effects
  document.querySelectorAll('.nav-link').forEach(link => {
    const underline = link.querySelector('.nav-underline');
    
    link.addEventListener('mouseenter', () => {
      animate(underline, { width: '100%' }, { duration: 0.3 });
    });
    
    link.addEventListener('mouseleave', () => {
      animate(underline, { width: '0%' }, { duration: 0.3 });
    });
  });
});
</script>
